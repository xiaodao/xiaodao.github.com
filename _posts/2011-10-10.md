---
layout: post
title: 眼见他起高楼，眼见他宴宾客 (2) 
category: 敏捷开发
tags: [Agile adoption, ]
---
在我回北京之前，有人跟我说，我马上要接触的这个团队已经尝试敏捷两三年了，心态很开放，很积极，还在用ATDD。

第一天早上，领导也很热情洋溢的跟我描述了团队现状。但开始pair的时候，我就被接二连三的打击到了。

<strong>第一件事情：</strong>

开发之前，他们先对照着业务逻辑把流程图画出来，然后给每个节点都创建一个类，开始节点一个，判断节点一个，行动节点一个，结束节点一个。随便打开一个package，下面密密麻麻的几十个class，分别是IsXXXEmpty、Is404Error、Is200Or300、Is……

大哥们，你们是用什么想法写Java代码呢？

<strong>第二件事情：</strong>

继而又碰到五、六千行的类。

我说，我们重构一下吧。pair说，没有测试保障啊。

我说，测试呢？pair说，没有啊。

我说，为什么没有？pair说，不会。

我问，为什么不会？pair说，对平台的代码有依赖，不知道怎么测。

我问，也就是说，从开始到现在，就一个测试都没有写过？pair说，确实没写过。

既然这样，那我们就一起来测一下呗。下载mockito，下载junit（真悲哀，这个jar包还需要下载……），读一下api，讲一下测试的思路，从头到尾不过一个多小时，几个case就完成了。

从学习到应用，总共能花多长时间呢？比起调试、维护集成测试的成本来说，这个应该算是微乎其微了吧？为什么一直没人学，没人做啊？

<strong>第三件事情：</strong>

稍稍重构了一下后，我说，有个类没用了，我们删掉吧。pair说，不行，我们没有删除文件的权限。

我忍了一会，说，那我们能提交么？pair说，不行，我们得先到服务器上到对应目录下建立同名的空文件，然后checkout出来，再用ftp把新加的文件上传覆盖掉空文件，最后才能checkin。我继续问，那如果我们要做个方法的rename，涉及到多个文件，那我岂不是得先一个个checkout出来？pair说，是的。

我问，你们怎么忍的了这么麻烦的事情？pair说，习惯了。

<strong>第四件事情：</strong>

软件发布新版本，要集成到产品平台中，测试人员手工输入100多条命令才能完成更新。

……

坦率的说，这支团队有些地方都已经做的相当出色了，比如开发和测试坐在一起，业务分析师也坐在不远，沟通很方便很频繁，真的像是一个整体 ── 这在大型传统组织中是很难得的。

但是，他们还有很多很多该做的事情没有做，而那些事情，会对代码质量、开发效率、产品质量……产生根本性影响。